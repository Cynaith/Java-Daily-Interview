## nio
### 什么是阻塞
阻塞就是发起一个请求，调用者一直等待请求结果返回，也就是当前线程会被挂起，无法从事其他任务，只有当条件就绪才能继续。
### 什么是非阻塞
非阻塞就是发起一个请求，调用者不用一直等着结果返回，可以先去干其他事情。
### 阻塞IO模型
最传统的IO模型，在读写数据过程中会发生阻塞现象。
<br/>
如:`data = socket.read();`

### 非阻塞IO模型
当用户线程发起一个read操作后，并不需要等待，马上就能得到一个结果，如果结果是error时，她可以再次发送read操作。
<br/>
```java
while(true){
data = socket.read(); if(data!= error){ 处理数据
break;
}
}
```
但是此情况会导致CPU占用率非常高

### 多路复用IO模型

Java NIO实际上就是多路复用IO，在多路复用IO模型中，会有一个线程不断去轮询多个socket状态，
只有当socket真正有读写事件时，才真正调用实际的IO读写操作。
<br/>
该模型中，只需要一个线程就可以管理多个socket。
<br/>
在NIO中，通过selector.select()去查询每个通道是否有到达事件，如果没有事件，则一直阻塞在那里。

> 另外多路复用 IO 为何比非阻塞 IO 模型的效率高是因为在非阻塞 IO 中，不断地询问 socket 状态
  时通过用户线程去进行的，而在多路复用 IO 中，轮询每个 socket 状态是内核在进行的，这个效率要比用户线程要高的多。

### NIO特性
- NIO流是非阻塞IO而IO流是阻塞IO
- Buffer缓冲区
    - IO面向流，NIO面向缓冲区
- Channel通道
    - NIO通过Channel进行读写，Channel是双向的，而流的读写是单向的。无论读写，通道只能和Buffer交互。
    因为Buffer，通道可以异步地读写。
- Selector选择器
    - NIO有选择器，而IO没有。<br/>
      选择器用于使用单个线程处理多个通道。因此，它需要较少的线程来处理这些通道。线程之间的切换对于操作系统来说是昂贵的。 因此，为了提高系统效率选择器是有用的。

### Netty
> 优化JDK原生的NIO