## 计算机网络



### 什么是网络协议？
网络协议就是你交给一大片机器说同样的话，共同完成一件事。
### 网络为什么分层？
- 复杂的程序都要分层，不能表达层层封装的比喻都是不恰当的。
- 只要网络上跑的包，都是完整的，可以有下层没上层，不能有上层没下层。
- 把自己想像成一个处理网络包的程序，你的脑袋就是处理逻辑，你的手就是网口。

### IP地址与MAC地址
- IP地址是网络世界的通信地址，相当于现实世界的门牌号码，有定位功能。
- MAC是网络世界的身份证，没有定位功能

### 网关
> 网关往往是一台路由器，他有5个网口或者网卡，相当于有五只手，分别连着5个局域网，每只手的IP地址都和局域网的IP地址有相同的网段，
> 每只手都是它握住的那个局域网的网关。
- 静态路由 
    - 在路由器上，配置一条一条规则，想访问BBS站，从2号口出去，下一跳是IP2；想访问教学视频站，从3号口出去，下一跳是IP3。
- 策略路由
    - 可以配置多个路由表，可以根据源IP地址、入口设备、TOS等选择路由表，然后在路由表中查找路由。这样可以使来自不同来源的包走不同的路由。
- 欧洲十国游
    - MAC变IP不变(这就像在欧洲各国之间旅游，一个签证就能搞定)
- 玄奘西游
    - MAC变IP也变NAT(就像出国，不用自己身份证，而要改用护照一样，玄奘西游也要拿着专门取经的通关文碟，而不能用自己国家的身份证)

### 路由协议
> 唐僧西天取经，需要解决两大问题：一个是在每个国家如何找到正确的路，去换通关文碟、吃饭、休息；一个是在国家之间，野外行走的时候，如何找到正确的路、水源的问题。

- 基于链路状态路由算法的OSPF
    - 在国家内部，找到最短路径是最重要的。
- 基于距离矢量路由算法的BGP
    - 国家之间，不光远近的问题，还有政策问题。
    
### TCP
> 传输控制协议
- 特点
    - 面向连接
    - 每一条TCP连接只能是一对一的
    - 提供可靠交付
    - 提供全双工通信
    - 面向字节流
TCP用主机的IP地址加上主机上的端口号作为TCP连接的端点。这样的端点就叫做套接字(socket)或插口。
每一条TCP连接唯一被通信两端的两个端点所确定
- 拥塞控制算法
    - 即慢开始
    - 拥塞避免
    - 快重传
    - 快恢复
### UDP
> 用户数据报协议
- 三大特点
    - 沟通简单，不需要大量数据结构、处理逻辑、包头字段
    - 不会建立连接，虽然有端口号，但是监听在这个地方，谁都可以传给他数据，他也可以传给任何人数据。
    - 不会根据网络情况进行发包的拥塞控制，无论网络丢包情况如何，他该怎么发就怎么发
- 三大使用场景
    - 需要资源少，在网络情况好的内网或对于丢包不敏感的应用
    - 不需要一对一沟通，建立连接，而是可以广播的应用
    - 需要处理速度快，时延低，可以容忍少数丢包，但是要求即使网络拥塞，也毫不退缩。


### Session/Cookie


### ARP协议
> 用于根据IP地址查询相应的以太网MAC地址
### ICMP协议
> ICMP: 用于告知网络包传送过程中产生的错误以及各种控制信息。


### RARP协议


### IGMP协议


### Socket编程



### 流媒体协议


### DNS和HTTPDNS


### 移动网络


### VPN


### 数据中心 


### CDN


### P2P


### HTTPS


### HTTP

> HTTP: 超文本传输协议，也就是HyperText Transfer Protocol

- 超文本传输协议
    - 超文本
    - 传输
    - 协议

常见的状态码
- 1xx 提示成功，表示目前是协议处理的中间状态
- 2xx 成功，报文已经收到并被正确处理
- 3xx 重定向，资源位置发生变动，需要客户端重新发送请求
- 4xx 客户端错误，请求报文有误，服务器无法处理
- 5xx 服务器错误，服务器在处理请求时内部发生了错误

常见的字段
- Host
    - 客户端发送请求时，用来指定服务器的域名
- Content-Length
    - 服务器返回数据时，会有Content-Length字段，表明本次回应的数据长度。
- Connection
    - 常用于客户端要求服务器使用TCP持久连接，以便其他请求复用。
    > HTTP/1.1 默认连接都是持久连接(Keep-Alive)，但为了兼容老版本的HTTP，
      需要指定Connection首部字段的值为Keep-Alive
- Content-Type
    - 用于服务器告知客户端，本次数据是什么格式。
    > `Content-Type: text/html; charset=utf-8`： 表明发送的是网页，编码为UTF-8
    > `Accept: */*`： 客户端请求时，可以使用Accept字段声明自己可以接受哪些数据格式
- Content-Encoding
    - 说明数据的压缩方法，表示服务器返回的数据使用了什么压缩格式。
    > `Content-Encoding: gzip`： 表示服务器返回的数据采用gzip方式压缩
    > `Accept-Encoding: gzip,deflate `：客户端请求时，说明自己可以接受哪些压缩方式
### VLAN


### STP协议


### MAC层


### PXE


### DHCP协议




refer to : https://time.geekbang.org/column/article/14905